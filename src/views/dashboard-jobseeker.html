<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Qravity</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css">
    <style>
        .sidebar {
            position: fixed;
            top: 0;
            bottom: 0;
            left: 0;
            z-index: 100;
            padding: 48px 0 0;
            box-shadow: inset -1px 0 0 rgba(0, 0, 0, .1);
            background-color: #f8f9fa;
        }

        .sidebar-sticky {
            position: relative;
            top: 0;
            height: calc(100vh - 48px);
            padding-top: .5rem;
            overflow-x: hidden;
            overflow-y: auto;
        }

        .navbar {
            box-shadow: 0 2px 4px rgba(0,0,0,.1);
        }

        .nav-link {
            color: #333;
            padding: 0.5rem 1rem;
            margin: 0.2rem 0;
        }

        .nav-link:hover {
            background-color: #e9ecef;
            border-radius: 0.25rem;
        }

        .nav-link.active {
            background-color: #0d6efd;
            color: white;
            border-radius: 0.25rem;
        }

        .main-content {
            margin-left: 240px;
            padding: 20px;
        }

        .stats-card {
            transition: transform 0.3s ease;
        }

        .stats-card:hover {
            transform: translateY(-5px);
        }

        @media (max-width: 768px) {
            .sidebar {
                width: 100%;
                position: relative;
                padding-top: 0;
            }
            .main-content {
                margin-left: 0;
            }
        }

        .plan-card {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            border: 1px solid #dee2e6;
        }

        .plan-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 0.5rem 1rem rgba(0,0,0,0.15);
        }

        .plan-features li {
            margin-bottom: 0.5rem;
        }

        .usage-stat {
            padding: 1rem;
            background-color: #f8f9fa;
            border-radius: 0.25rem;
        }

        .progress {
            height: 0.5rem;
            margin: 0.5rem 0;
        }

        .profile-picture-container {
            position: relative;
            width: 150px;
            height: 150px;
            margin: 0 auto;
        }

        .profile-picture {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .profile-picture-overlay {
            position: absolute;
            bottom: 0;
            right: 0;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 50%;
            padding: 5px;
        }

        .form-check-input:checked {
            background-color: #0d6efd;
            border-color: #0d6efd;
        }
        /* Add these styles to your existing CSS */
        .border-danger {
            transition: all 0.3s ease;
        }

        .border-danger:hover {
            box-shadow: 0 0 0 0.2rem rgba(220, 53, 69, 0.25);
        }

        #logoutBtn {
            transition: all 0.3s ease;
        }

        #logoutBtn:hover {
            background-color: #dc3545;
            color: white;
        }

        .account-actions {
            margin-top: 2rem;
            padding-top: 2rem;
            border-top: 1px solid #dee2e6;
        }
    </style>
</head>
<body>
    <!-- Top Navigation -->
    <nav class="navbar navbar-expand-lg navbar-light bg-white fixed-top">
        <div class="container-fluid">
            <a class="navbar-brand ms-5" href="/">Qravity</a>
            <div class="d-flex align-items-center">
                <div class="dropdown me-3">
                    <button class="btn btn-link text-dark dropdown-toggle" type="button" id="notificationsDropdown" data-bs-toggle="dropdown">
                        <i class="bi bi-bell"></i>
                        <span class="badge bg-danger">3</span>
                    </button>
                    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="notificationsDropdown">
                        <li><a class="dropdown-item" href="#">New job match found</a></li>
                        <li><a class="dropdown-item" href="#">Application submitted successfully</a></li>
                        <li><a class="dropdown-item" href="#">Profile completion reminder</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </nav>

    <!-- Sidebar -->
    <nav class="col-md-3 col-lg-2 d-md-block sidebar">
        <div class="sidebar-sticky">
            <ul class="nav flex-column">
                <li class="nav-item">
                    <a class="nav-link active" href="#overview">
                        <i class="bi bi-house-door me-2"></i>
                        Overview
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#applications">
                        <i class="bi bi-briefcase me-2"></i>
                        Applications
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#preferences">
                        <i class="bi bi-sliders me-2"></i>
                        Job Preferences
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#resume">
                        <i class="bi bi-file-text me-2"></i>
                        Resume
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#automation">
                        <i class="bi bi-robot me-2"></i>
                        Automation Settings
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#subscription">
                        <i class="bi bi-credit-card me-2"></i>
                        Subscription
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#profile">
                        <i class="bi bi-person-circle me-2"></i>
                        Profile
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#settings">
                        <i class="bi bi-gear me-2"></i>
                        Settings
                    </a>
                </li>
            </ul>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="main-content">
        <div class="container-fluid">
            <!-- Overview Section -->
            <section id="overview">
                <h2 class="mb-4">Dashboard Overview</h2>
                <div class="row g-4 mb-4">
                    <div class="col-md-3">
                        <div class="card stats-card bg-primary text-white">
                            <div class="card-body">
                                <h5 class="card-title">Applications</h5>
                                <h2 class="card-text">47</h2>
                                <small>Last 30 days</small>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="card stats-card bg-success text-white">
                            <div class="card-body">
                                <h5 class="card-title">Responses</h5>
                                <h2 class="card-text">12</h2>
                                <small>Positive responses</small>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="card stats-card bg-info text-white">
                            <div class="card-body">
                                <h5 class="card-title">Interviews</h5>
                                <h2 class="card-text">5</h2>
                                <small>Scheduled</small>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="card stats-card bg-warning text-white">
                            <div class="card-body">
                                <h5 class="card-title">Profile Views</h5>
                                <h2 class="card-text">156</h2>
                                <small>This month</small>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Recent Applications -->
                <div class="card mb-4">
                    <div class="card-header d-flex justify-content-between align-items-center">
                        <h5 class="mb-0">Recent Applications</h5>
                        <a href="#" class="btn btn-sm btn-primary">View All</a>
                    </div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table table-hover">
                                <thead>
                                    <tr>
                                        <th>Company</th>
                                        <th>Position</th>
                                        <th>Date</th>
                                        <th>Status</th>
                                        <th>Action</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>Google</td>
                                        <td>Senior Software Engineer</td>
                                        <td>2024-03-15</td>
                                        <td><span class="badge bg-warning">Pending</span></td>
                                        <td><button class="btn btn-sm btn-outline-primary">View</button></td>
                                    </tr>
                                    <tr>
                                        <td>Microsoft</td>
                                        <td>Full Stack Developer</td>
                                        <td>2024-03-14</td>
                                        <td><span class="badge bg-success">Responded</span></td>
                                        <td><button class="btn btn-sm btn-outline-primary">View</button></td>
                                    </tr>
                                    <tr>
                                        <td>Amazon</td>
                                        <td>Cloud Engineer</td>
                                        <td>2024-03-13</td>
                                        <td><span class="badge bg-danger">Rejected</span></td>
                                        <td><button class="btn btn-sm btn-outline-primary">View</button></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Automation Status -->
                <div class="card">
                    <div class="card-header">
                        <h5 class="mb-0">Automation Status</h5>
                    </div>
                    <div class="card-body">
                        <div class="mb-3">
                            <div class="form-check form-switch">
                                <input class="form-check-input" type="checkbox" id="automationToggle" checked>
                                <label class="form-check-label" for="automationToggle">Auto-apply enabled</label>
                            </div>
                        </div>
                        <div class="progress mb-3">
                            <div class="progress-bar" role="progressbar" style="width: 70%;" aria-valuenow="70" aria-valuemin="0" aria-valuemax="100">70% of daily limit used</div>
                        </div>
                        <small class="text-muted">14 applications remaining today</small>
                    </div>
                </div>
            </section>

            <!-- Applications Section -->
            <section id="applications" class="d-none">
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <h2>My Applications</h2>
                    <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#applicationDetailsModal">
                        <i class="bi bi-plus-circle me-2"></i>Add Application
                    </button>
                </div>

                <!-- Application Statistics Cards -->
                <div class="row g-4 mb-4">
                    <div class="col-md-3">
                        <div class="card stats-card bg-primary text-white">
                            <div class="card-body">
                                <h6>Total Applications</h6>
                                <h2 id="totalApplications">0</h2>
                                <small class="text-white-50">Last 30 days</small>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="card stats-card bg-success text-white">
                            <div class="card-body">
                                <h6>Responses Received</h6>
                                <h2 id="totalResponses">0</h2>
                                <small class="text-white-50">Response rate: <span id="responseRate">0%</span></small>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="card stats-card bg-info text-white">
                            <div class="card-body">
                                <h6>Interviews Scheduled</h6>
                                <h2 id="totalInterviews">0</h2>
                                <small class="text-white-50">Interview rate: <span id="interviewRate">0%</span></small>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="card stats-card bg-warning text-white">
                            <div class="card-body">
                                <h6>Pending Review</h6>
                                <h2 id="pendingReview">0</h2>
                                <small class="text-white-50">Awaiting response</small>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Applications Table Card -->
                <div class="card">
                    <div class="card-header">
                        <div class="d-flex justify-content-between align-items-center">
                            <h5 class="mb-0">Application History</h5>
                            <div class="d-flex gap-2">
                                <div class="input-group">
                                    <input type="text" class="form-control" id="applicationSearch" placeholder="Search applications...">
                                    <button class="btn btn-outline-secondary" type="button">
                                        <i class="bi bi-search"></i>
                                    </button>
                                </div>
                                <div class="dropdown">
                                    <button class="btn btn-outline-primary dropdown-toggle" type="button" data-bs-toggle="dropdown">
                                        Filter Status
                                    </button>
                                    <ul class="dropdown-menu">
                                        <li><a class="dropdown-item" href="#" data-filter="all">All Applications</a></li>
                                        <li><a class="dropdown-item" href="#" data-filter="pending">Pending</a></li>
                                        <li><a class="dropdown-item" href="#" data-filter="interviewing">Interviewing</a></li>
                                        <li><a class="dropdown-item" href="#" data-filter="offered">Offered</a></li>
                                        <li><a class="dropdown-item" href="#" data-filter="rejected">Rejected</a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table table-hover">
                                <thead>
                                    <tr>
                                        <th>Company</th>
                                        <th>Position</th>
                                        <th>Applied Date</th>
                                        <th>Status</th>
                                        <th>Source</th>
                                        <th>Next Step</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="applicationsTableBody">
                                    <!-- Table content will be dynamically populated -->
                                </tbody>
                            </table>
                        </div>
                        <div class="d-flex justify-content-between align-items-center mt-3">
                            <div class="showing-entries">
                                Showing <span id="showingStart">1</span> to <span id="showingEnd">10</span> of <span id="totalEntries">0</span> entries
                            </div>
                            <nav aria-label="Applications pagination">
                                <ul class="pagination mb-0" id="applicationsPagination">
                                    <!-- Pagination will be dynamically populated -->
                                </ul>
                            </nav>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Job Preferences Section -->
            <section id="preferences" class="d-none">
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <h2>Job Preferences</h2>
                    <button class="btn btn-primary" id="savePreferences">
                        <i class="bi bi-save me-2"></i>Save Changes
                    </button>
                </div>

                <div class="card mb-4">
                    <div class="card-body">
                        <form id="preferencesForm">
                            <!-- Job Types -->
                            <div class="mb-4">
                                <h5>Job Types</h5>
                                <div class="row g-3">
                                    <div class="col-md-3">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" id="fullTime" checked>
                                            <label class="form-check-label" for="fullTime">Full-time</label>
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" id="contract">
                                            <label class="form-check-label" for="contract">Contract</label>
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" id="remote" checked>
                                            <label class="form-check-label" for="remote">Remote</label>
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" id="hybrid">
                                            <label class="form-check-label" for="hybrid">Hybrid</label>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Location Preferences -->
                            <div class="mb-4">
                                <h5>Location Preferences</h5>
                                <div class="row g-3">
                                    <div class="col-md-6">
                                        <label class="form-label">Preferred Locations</label>
                                        <input type="text" class="form-control" placeholder="Add locations (comma-separated)">
                                        <small class="text-muted">Example: New York, San Francisco, Austin</small>
                                    </div>
                                    <div class="col-md-6">
                                        <label class="form-label">Maximum Distance</label>
                                        <select class="form-select">
                                            <option value="10">Within 10 miles</option>
                                            <option value="25">Within 25 miles</option>
                                            <option value="50" selected>Within 50 miles</option>
                                            <option value="100">Within 100 miles</option>
                                        </select>
                                    </div>
                                </div>
                            </div>

                            <!-- Salary Range -->
                            <div class="mb-4">
                                <h5>Salary Range</h5>
                                <div class="row g-3">
                                    <div class="col-md-6">
                                        <label class="form-label">Minimum Salary</label>
                                        <div class="input-group">
                                            <span class="input-group-text">$</span>
                                            <input type="number" class="form-control" value="80000">
                                            <span class="input-group-text">/year</span>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <label class="form-label">Maximum Salary</label>
                                        <div class="input-group">
                                            <span class="input-group-text">$</span>
                                            <input type="number" class="form-control" value="120000">
                                            <span class="input-group-text">/year</span>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Keywords -->
                            <div class="mb-4">
                                <h5>Keywords</h5>
                                <div class="row g-3">
                                    <div class="col-md-12">
                                        <label class="form-label">Must Include Keywords</label>
                                        <input type="text" class="form-control" placeholder="Required keywords (comma-separated)">
                                        <small class="text-muted">Example: Python, React, AWS</small>
                                    </div>
                                    <div class="col-md-12">
                                        <label class="form-label">Exclude Keywords</label>
                                        <input type="text" class="form-control" placeholder="Keywords to avoid (comma-separated)">
                                        <small class="text-muted">Example: PHP, WordPress</small>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </section>

            <!-- Resume Section -->
            <section id="resume" class="d-none">
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <h2>Resume</h2>
                    <div>
                        <button class="btn btn-outline-primary me-2">
                            <i class="bi bi-download me-2"></i>Download PDF
                        </button>
                        <button class="btn btn-primary" id="saveResume">
                            <i class="bi bi-save me-2"></i>Save Changes
                        </button>
                    </div>
                </div>

                <div class="card mb-4">
                    <div class="card-body">
                        <form id="resumeForm">
                            <!-- Personal Information -->
                            <div class="mb-4">
                                <h5>Personal Information</h5>
                                <div class="row g-3">
                                    <div class="col-md-6">
                                        <label class="form-label">Full Name</label>
                                        <input type="text" class="form-control" required>
                                    </div>
                                    <div class="col-md-6">
                                        <label class="form-label">Professional Title</label>
                                        <input type="text" class="form-control" required>
                                    </div>
                                    <div class="col-md-6">
                                        <label class="form-label">Email</label>
                                        <input type="email" class="form-control" required>
                                    </div>
                                    <div class="col-md-6">
                                        <label class="form-label">Phone</label>
                                        <input type="tel" class="form-control" required>
                                    </div>
                                    <div class="col-12">
                                        <label class="form-label">Professional Summary</label>
                                        <textarea class="form-control" rows="4"></textarea>
                                    </div>
                                </div>
                            </div>

                            <!-- Work Experience -->
                            <div class="mb-4">
                                <div class="d-flex justify-content-between align-items-center mb-3">
                                    <h5>Work Experience</h5>
                                    <button type="button" class="btn btn-outline-primary btn-sm" id="addExperience">
                                        <i class="bi bi-plus-circle me-2"></i>Add Experience
                                    </button>
                                </div>
                                <div id="experienceContainer">
                                    <div class="card mb-3">
                                        <div class="card-body">
                                            <div class="row g-3">
                                                <div class="col-md-6">
                                                    <label class="form-label">Company Name</label>
                                                    <input type="text" class="form-control" required>
                                                </div>
                                                <div class="col-md-6">
                                                    <label class="form-label">Job Title</label>
                                                    <input type="text" class="form-control" required>
                                                </div>
                                                <div class="col-md-6">
                                                    <label class="form-label">Start Date</label>
                                                    <input type="date" class="form-control" required>
                                                </div>
                                                <div class="col-md-6">
                                                    <label class="form-label">End Date</label>
                                                    <input type="date" class="form-control">
                                                    <div class="form-check mt-2">
                                                        <input class="form-check-input" type="checkbox" id="currentJob">
                                                        <label class="form-check-label" for="currentJob">Current Position</label>
                                                    </div>
                                                </div>
                                                <div class="col-12">
                                                    <label class="form-label">Description</label>
                                                    <textarea class="form-control" rows="3"></textarea>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Education -->
                            <div class="mb-4">
                                <div class="d-flex justify-content-between align-items-center mb-3">
                                    <h5>Education</h5>
                                    <button type="button" class="btn btn-outline-primary btn-sm" id="addEducation">
                                        <i class="bi bi-plus-circle me-2"></i>Add Education
                                    </button>
                                </div>
                                <div id="educationContainer">
                                    <div class="card mb-3">
                                        <div class="card-body">
                                            <div class="row g-3">
                                                <div class="col-md-6">
                                                    <label class="form-label">Institution</label>
                                                    <input type="text" class="form-control" required>
                                                </div>
                                                <div class="col-md-6">
                                                    <label class="form-label">Degree</label>
                                                    <input type="text" class="form-control" required>
                                                </div>
                                                <div class="col-md-6">
                                                    <label class="form-label">Field of Study</label>
                                                    <input type="text" class="form-control" required>
                                                </div>
                                                <div class="col-md-6">
                                                    <label class="form-label">Graduation Date</label>
                                                    <input type="date" class="form-control" required>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Skills -->
                            <div class="mb-4">
                                <h5>Skills</h5>
                                <div class="row g-3">
                                    <div class="col-12">
                                        <label class="form-label">Technical Skills</label>
                                        <input type="text" class="form-control" placeholder="Add skills (comma-separated)">
                                        <small class="text-muted">Example: JavaScript, Python, React, Node.js</small>
                                    </div>
                                    <div class="col-12">
                                        <label class="form-label">Soft Skills</label>
                                        <input type="text" class="form-control" placeholder="Add soft skills (comma-separated)">
                                        <small class="text-muted">Example: Leadership, Communication, Problem Solving</small>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>

                <!-- Add this section to your resume section -->
                <div class="card mb-4">
                    <div class="card-header">
                        <h5 class="mb-0">Resume Score</h5>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="score-circle position-relative" id="overallScoreCircle">
                                    <canvas width="150" height="150"></canvas>
                                    <div class="score-text position-absolute top-50 start-50 translate-middle">
                                        <h3 class="mb-0" id="overallScore">0</h3>
                                        <small>Overall Score</small>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="score-breakdown">
                                    <div class="mb-3">
                                        <label class="d-flex justify-content-between">
                                            Completeness
                                            <span id="completenessScore">0%</span>
                                        </label>
                                        <div class="progress">
                                            <div class="progress-bar" id="completenessBar" role="progressbar"></div>
                                        </div>
                                    </div>
                                    <div class="mb-3">
                                        <label class="d-flex justify-content-between">
                                            Keyword Optimization
                                            <span id="keywordScore">0%</span>
                                        </label>
                                        <div class="progress">
                                            <div class="progress-bar" id="keywordBar" role="progressbar"></div>
                                        </div>
                                    </div>
                                    <div class="mb-3">
                                        <label class="d-flex justify-content-between">
                                            Experience Impact
                                            <span id="experienceScore">0%</span>
                                        </label>
                                        <div class="progress">
                                            <div class="progress-bar" id="experienceBar" role="progressbar"></div>
                                        </div>
                                    </div>
                                    <div class="mb-3">
                                        <label class="d-flex justify-content-between">
                                            Skills Match
                                            <span id="skillsScore">0%</span>
                                        </label>
                                        <div class="progress">
                                            <div class="progress-bar" id="skillsBar" role="progressbar"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="suggestions mt-4">
                            <h6>Improvement Suggestions</h6>
                            <ul class="list-group" id="suggestionsList">
                                <!-- Suggestions will be populated here -->
                            </ul>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Automation Settings Section -->
            <section id="automation" class="d-none">
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <h2>Automation Settings</h2>
                    <button class="btn btn-primary" id="saveAutomationSettings">
                        <i class="bi bi-save me-2"></i>Save Settings
                    </button>
                </div>

                <div class="row">
                    <!-- Main Settings Card -->
                    <div class="col-md-8">
                        <div class="card mb-4">
                            <div class="card-header">
                                <h5 class="mb-0">Auto-Application Rules</h5>
                            </div>
                            <div class="card-body">
                                <form id="automationForm">
                                    <!-- General Settings -->
                                    <div class="mb-4">
                                        <div class="form-check form-switch mb-3">
                                            <input class="form-check-input" type="checkbox" id="enableAutomation">
                                            <label class="form-check-label" for="enableAutomation">Enable Auto-Application</label>
                                        </div>
                                        <div class="row g-3">
                                            <div class="col-md-6">
                                                <label class="form-label">Daily Application Limit</label>
                                                <select class="form-select" id="dailyLimit">
                                                    <option value="5">5 applications</option>
                                                    <option value="10">10 applications</option>
                                                    <option value="15">15 applications</option>
                                                    <option value="20">20 applications</option>
                                                </select>
                                            </div>
                                            <div class="col-md-6">
                                                <label class="form-label">Application Interval</label>
                                                <select class="form-select" id="applicationInterval">
                                                    <option value="1">Every hour</option>
                                                    <option value="2">Every 2 hours</option>
                                                    <option value="4">Every 4 hours</option>
                                                    <option value="6">Every 6 hours</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Matching Criteria -->
                                    <div class="mb-4">
                                        <h6>Job Matching Criteria</h6>
                                        <div class="row g-3">
                                            <div class="col-md-6">
                                                <label class="form-label">Minimum Salary</label>
                                                <input type="number" class="form-control" id="minSalary">
                                            </div>
                                            <div class="col-md-6">
                                                <label class="form-label">Maximum Distance (miles)</label>
                                                <input type="number" class="form-control" id="maxDistance">
                                            </div>
                                            <div class="col-12">
                                                <label class="form-label">Required Keywords (comma-separated)</label>
                                                <input type="text" class="form-control" id="requiredKeywords" 
                                                       placeholder="e.g., javascript, react, node.js">
                                            </div>
                                            <div class="col-12">
                                                <label class="form-label">Excluded Keywords (comma-separated)</label>
                                                <input type="text" class="form-control" id="excludedKeywords"
                                                       placeholder="e.g., senior, lead, manager">
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Platform Settings -->
                                    <div class="mb-4">
                                        <h6>Job Platforms</h6>
                                        <div class="row g-3">
                                            <div class="col-md-4">
                                                <div class="form-check">
                                                    <input class="form-check-input" type="checkbox" id="linkedinEnabled">
                                                    <label class="form-check-label" for="linkedinEnabled">LinkedIn</label>
                                                </div>
                                            </div>
                                            <div class="col-md-4">
                                                <div class="form-check">
                                                    <input class="form-check-input" type="checkbox" id="indeedEnabled">
                                                    <label class="form-check-label" for="indeedEnabled">Indeed</label>
                                                </div>
                                            </div>
                                            <div class="col-md-4">
                                                <div class="form-check">
                                                    <input class="form-check-input" type="checkbox" id="glassdoorEnabled">
                                                    <label class="form-check-label" for="glassdoorEnabled">Glassdoor</label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>

                    <!-- Stats and Activity Card -->
                    <div class="col-md-4">
                        <div class="card mb-4">
                            <div class="card-header">
                                <h5 class="mb-0">Automation Stats</h5>
                            </div>
                            <div class="card-body">
                                <div class="mb-4">
                                    <h6>Today's Activity</h6>
                                    <div class="progress mb-2">
                                        <div class="progress-bar" role="progressbar" id="dailyProgress" 
                                             style="width: 45%;" aria-valuenow="45" aria-valuemin="0" aria-valuemax="100">45%</div>
                                    </div>
                                    <small class="text-muted">45 applications today</small>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Subscription Section -->
            <section id="subscription" class="d-none">
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <h2>Subscription</h2>
                    <button class="btn btn-outline-primary" id="viewBillingHistory">
                        <i class="bi bi-clock-history me-2"></i>Billing History
                    </button>
                </div>

                <!-- Current Plan Card -->
                <div class="row mb-4">
                    <div class="col-md-8">
                        <div class="card">
                            <div class="card-header">
                                <h5 class="mb-0">Current Plan</h5>
                            </div>
                            <div class="card-body">
                                <div class="d-flex justify-content-between align-items-center mb-4">
                                    <div>
                                        <h3 class="mb-1" id="currentPlanName">Free Plan</h3>
                                        <p class="text-muted mb-0" id="currentPlanPrice">$0/month</p>
                                    </div>
                                    <div class="plan-status">
                                        <span class="badge bg-success" id="planStatus">Active</span>
                                    </div>
                                </div>
                                <div class="plan-features mb-4">
                                    <h6>Your Plan Features:</h6>
                                    <ul class="list-unstyled" id="currentFeatures">
                                        <li><i class="bi bi-check-circle-fill text-success me-2"></i>10 Job Applications/month</li>
                                        <li><i class="bi bi-check-circle-fill text-success me-2"></i>Basic Resume Builder</li>
                                        <li><i class="bi bi-check-circle-fill text-success me-2"></i>Email Support</li>
                                    </ul>
                                </div>
                                <div class="plan-actions">
                                    <button class="btn btn-primary" id="upgradePlan">Upgrade Plan</button>
                                    <button class="btn btn-outline-danger ms-2" id="cancelSubscription">Cancel Subscription</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Usage Stats -->
                    <div class="col-md-4">
                        <div class="card">
                            <div class="card-header">
                                <h5 class="mb-0">Usage Statistics</h5>
                            </div>
                            <div class="card-body">
                                <div class="usage-stat mb-4">
                                    <label class="d-flex justify-content-between">
                                        Job Applications
                                        <span id="applicationCount">5/10</span>
                                    </label>
                                    <div class="progress">
                                        <div class="progress-bar" role="progressbar" style="width: 50%"></div>
                                    </div>
                                    <small class="text-muted">Resets in 15 days</small>
                                </div>
                                <div class="usage-stat mb-4">
                                    <label class="d-flex justify-content-between">
                                        Resume Downloads
                                        <span id="resumeCount">2/5</span>
                                    </label>
                                    <div class="progress">
                                        <div class="progress-bar" role="progressbar" style="width: 40%"></div>
                                    </div>
                                    <small class="text-muted">Resets in 15 days</small>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Available Plans -->
                <div class="card">
                    <div class="card-header">
                        <h5 class="mb-0">Available Plans</h5>
                    </div>
                    <div class="card-body">
                        <div class="row g-4" id="availablePlans">
                            <!-- Free Plan -->
                            <div class="col-md-4">
                                <div class="card h-100 plan-card">
                                    <div class="card-body">
                                        <h5 class="card-title">Free Plan</h5>
                                        <h6 class="card-subtitle mb-3 text-muted">$0/month</h6>
                                        <ul class="list-unstyled">
                                            <li><i class="bi bi-check-circle-fill text-success me-2"></i>10 Job Applications/month</li>
                                            <li><i class="bi bi-check-circle-fill text-success me-2"></i>Basic Resume Builder</li>
                                            <li><i class="bi bi-check-circle-fill text-success me-2"></i>Email Support</li>
                                        </ul>
                                        <button class="btn btn-outline-primary w-100" disabled>Current Plan</button>
                                    </div>
                                </div>
                            </div>
                            <!-- Pro Plan -->
                            <div class="col-md-4">
                                <div class="card h-100 plan-card">
                                    <div class="card-body">
                                        <h5 class="card-title">Pro Plan</h5>
                                        <h6 class="card-subtitle mb-3 text-muted">$9.99/month</h6>
                                        <ul class="list-unstyled">
                                            <li><i class="bi bi-check-circle-fill text-success me-2"></i>50 Job Applications/month</li>
                                            <li><i class="bi bi-check-circle-fill text-success me-2"></i>Advanced Resume Builder</li>
                                            <li><i class="bi bi-check-circle-fill text-success me-2"></i>Priority Support</li>
                                            <li><i class="bi bi-check-circle-fill text-success me-2"></i>Application Tracking</li>
                                        </ul>
                                        <button class="btn btn-primary w-100" data-plan="pro">Upgrade to Pro</button>
                                    </div>
                                </div>
                            </div>
                            <!-- Premium Plan -->
                            <div class="col-md-4">
                                <div class="card h-100 plan-card">
                                    <div class="card-body">
                                        <h5 class="card-title">Premium Plan</h5>
                                        <h6 class="card-subtitle mb-3 text-muted">$19.99/month</h6>
                                        <ul class="list-unstyled">
                                            <li><i class="bi bi-check-circle-fill text-success me-2"></i>Unlimited Applications</li>
                                            <li><i class="bi bi-check-circle-fill text-success me-2"></i>AI Resume Optimization</li>
                                            <li><i class="bi bi-check-circle-fill text-success me-2"></i>24/7 Priority Support</li>
                                            <li><i class="bi bi-check-circle-fill text-success me-2"></i>Advanced Analytics</li>
                                            <li><i class="bi bi-check-circle-fill text-success me-2"></i>Automated Applications</li>
                                        </ul>
                                        <button class="btn btn-primary w-100" data-plan="premium">Upgrade to Premium</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Profile Section -->
            <section id="profile" class="d-none">
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <h2>Profile</h2>
                    <button class="btn btn-primary" id="saveProfile">
                        <i class="bi bi-save me-2"></i>Save Changes
                    </button>
                </div>

                <div class="row">
                    <div class="col-md-4">
                        <!-- Profile Picture Card -->
                        <div class="card mb-4">
                            <div class="card-body text-center">
                                <div class="profile-picture-container mb-3">
                                    <img src="/images/default-avatar.png" 
                                         class="rounded-circle profile-picture" 
                                         id="profilePicture"
                                         alt="Profile Picture">
                                    <div class="profile-picture-overlay">
                                        <label for="profilePictureInput" class="btn btn-sm btn-light">
                                            <i class="bi bi-camera"></i>
                                        </label>
                                    </div>
                                </div>
                                <input type="file" 
                                       id="profilePictureInput" 
                                       accept="image/*" 
                                       class="d-none">
                                <h5 class="mb-1" id="profileName">John Doe</h5>
                                <p class="text-muted mb-3" id="profileTitle">Software Engineer</p>
                                <div class="profile-completion">
                                    <small class="text-muted">Profile Completion</small>
                                    <div class="progress mt-2">
                                        <div class="progress-bar" role="progressbar" style="width: 85%">85%</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Contact Information Card -->
                        <div class="card">
                            <div class="card-header">
                                <h5 class="mb-0">Contact Information</h5>
                            </div>
                            <div class="card-body">
                                <form id="contactForm">
                                    <div class="mb-3">
                                        <label class="form-label">Email</label>
                                        <input type="email" class="form-control" name="email" required>
                                    </div>
                                    <div class="mb-3">
                                        <label class="form-label">Phone</label>
                                        <input type="tel" class="form-control" name="phone">
                                    </div>
                                    <div class="mb-3">
                                        <label class="form-label">Location</label>
                                        <input type="text" class="form-control" name="location">
                                    </div>
                                    <div class="mb-3">
                                        <label class="form-label">LinkedIn</label>
                                        <input type="url" class="form-control" name="linkedin">
                                    </div>
                                    <div class="mb-3">
                                        <label class="form-label">Portfolio Website</label>
                                        <input type="url" class="form-control" name="website">
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-8">
                        <!-- Social Profiles Card -->
                        <div class="card">
                            <div class="card-header">
                                <h5 class="mb-0">Social Profiles</h5>
                            </div>
                            <div class="card-body">
                                <form id="socialForm">
                                    <div class="mb-3">
                                        <label class="form-label">GitHub</label>
                                        <input type="url" class="form-control" name="github">
                                    </div>
                                    <div class="mb-3">
                                        <label class="form-label">Twitter</label>
                                        <input type="url" class="form-control" name="twitter">
                                    </div>
                                    <div class="mb-3">
                                        <label class="form-label">Stack Overflow</label>
                                        <input type="url" class="form-control" name="stackoverflow">
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Add this inside the profile section, after the existing cards -->
                <div class="col-md-12 mt-4">
                    <div class="card border-danger">
                        <div class="card-header bg-danger text-white">
                            <h5 class="mb-0">Account Actions</h5>
                        </div>
                        <div class="card-body">
                            <div class="d-flex justify-content-between align-items-center">
                                <div>
                                    <h6 class="mb-1">Logout from Qravity</h6>
                                    <p class="text-muted mb-0">This will end your current session</p>
                                </div>
                                <button class="btn btn-outline-danger" id="logoutBtn">
                                    <i class="bi bi-box-arrow-right me-2"></i>Logout
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Settings Section -->
            <section id="settings" class="d-none">
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <h2>Settings</h2>
                    <button class="btn btn-primary" id="saveSettings">
                        <i class="bi bi-save me-2"></i>Save Changes
                    </button>
                </div>

                <div class="row">
                    <div class="col-md-4">
                        <!-- Account Settings Card -->
                        <div class="card mb-4">
                            <div class="card-header">
                                <h5 class="mb-0">Account Settings</h5>
                            </div>
                            <div class="card-body">
                                <form id="accountSettingsForm">
                                    <div class="mb-3">
                                        <label class="form-label">Change Password</label>
                                        <input type="password" class="form-control mb-2" 
                                               name="currentPassword" placeholder="Current Password">
                                        <input type="password" class="form-control mb-2" 
                                               name="newPassword" placeholder="New Password">
                                        <input type="password" class="form-control" 
                                               name="confirmPassword" placeholder="Confirm New Password">
                                    </div>
                                    <div class="mb-3">
                                        <label class="form-label">Two-Factor Authentication</label>
                                        <div class="form-check form-switch">
                                            <input class="form-check-input" type="checkbox" 
                                                   id="enable2FA">
                                            <label class="form-check-label" for="enable2FA">
                                                Enable 2FA
                                            </label>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>

                        <!-- Privacy Settings Card -->
                        <div class="card">
                            <div class="card-header">
                                <h5 class="mb-0">Privacy Settings</h5>
                            </div>
                            <div class="card-body">
                                <form id="privacySettingsForm">
                                    <div class="mb-3">
                                        <label class="form-label">Profile Visibility</label>
                                        <select class="form-select" name="profileVisibility">
                                            <option value="public">Public</option>
                                            <option value="private">Private</option>
                                            <option value="connections">Connections Only</option>
                                        </select>
                                    </div>
                                    <div class="mb-3">
                                        <div class="form-check form-switch">
                                            <input class="form-check-input" type="checkbox" 
                                                   id="showEmail">
                                            <label class="form-check-label" for="showEmail">
                                                Show email to employers
                                            </label>
                                        </div>
                                    </div>
                                    <div class="mb-3">
                                        <div class="form-check form-switch">
                                            <input class="form-check-input" type="checkbox" 
                                                   id="showPhone">
                                            <label class="form-check-label" for="showPhone">
                                                Show phone number to employers
                                            </label>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-8">
                        <!-- Notification Settings Card -->
                        <div class="card mb-4">
                            <div class="card-header">
                                <h5 class="mb-0">Notification Settings</h5>
                            </div>
                            <div class="card-body">
                                <form id="notificationSettingsForm">
                                    <h6 class="mb-3">Email Notifications</h6>
                                    <div class="mb-3">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" 
                                                   id="emailJobAlerts">
                                            <label class="form-check-label" for="emailJobAlerts">
                                                Job Alerts
                                            </label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" 
                                                   id="emailApplicationUpdates">
                                            <label class="form-check-label" for="emailApplicationUpdates">
                                                Application Updates
                                            </label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" 
                                                   id="emailMessages">
                                            <label class="form-check-label" for="emailMessages">
                                                Messages from Employers
                                            </label>
                                        </div>
                                    </div>

                                    <h6 class="mb-3">Push Notifications</h6>
                                    <div class="mb-3">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" 
                                                   id="pushJobAlerts">
                                            <label class="form-check-label" for="pushJobAlerts">
                                                Job Alerts
                                            </label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" 
                                                   id="pushApplicationUpdates">
                                            <label class="form-check-label" for="pushApplicationUpdates">
                                                Application Updates
                                            </label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" 
                                                   id="pushMessages">
                                            <label class="form-check-label" for="pushMessages">
                                                Messages from Employers
                                            </label>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>

                        <!-- Job Preferences Card -->
                        <div class="card">
                            <div class="card-header">
                                <h5 class="mb-0">Job Search Preferences</h5>
                            </div>
                            <div class="card-body">
                                <form id="jobPreferencesForm">
                                    <div class="row">
                                        <div class="col-md-6 mb-3">
                                            <label class="form-label">Job Type</label>
                                            <select class="form-select" name="jobType" multiple>
                                                <option value="full-time">Full-time</option>
                                                <option value="part-time">Part-time</option>
                                                <option value="contract">Contract</option>
                                                <option value="internship">Internship</option>
                                            </select>
                                        </div>
                                        <div class="col-md-6 mb-3">
                                            <label class="form-label">Work Location</label>
                                            <select class="form-select" name="workLocation" multiple>
                                                <option value="on-site">On-site</option>
                                                <option value="remote">Remote</option>
                                                <option value="hybrid">Hybrid</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="mb-3">
                                        <label class="form-label">Desired Salary Range</label>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <input type="number" class="form-control" 
                                                       name="minSalary" placeholder="Minimum">
                                            </div>
                                            <div class="col-md-6">
                                                <input type="number" class="form-control" 
                                                       name="maxSalary" placeholder="Maximum">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="mb-3">
                                        <label class="form-label">Preferred Industries</label>
                                        <input type="text" class="form-control" name="industries" 
                                               placeholder="Enter industries separated by commas">
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <!-- Application Details Modal -->
    <div class="modal fade" id="applicationDetailsModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Application Details</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="applicationForm">
                        <div class="row g-3">
                            <div class="col-md-6">
                                <label class="form-label">Company Name</label>
                                <input type="text" class="form-control" name="company" required>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">Position</label>
                                <input type="text" class="form-control" name="position" required>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">Application Date</label>
                                <input type="date" class="form-control" name="appliedDate" required>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">Source</label>
                                <select class="form-select" name="source" required>
                                    <option value="">Select source</option>
                                    <option value="linkedin">LinkedIn</option>
                                    <option value="indeed">Indeed</option>
                                    <option value="company">Company Website</option>
                                    <option value="referral">Referral</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>
                            <div class="col-12">
                                <label class="form-label">Job Description</label>
                                <textarea class="form-control" name="description" rows="3"></textarea>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">Salary Range</label>
                                <input type="text" class="form-control" name="salaryRange">
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">Location</label>
                                <input type="text" class="form-control" name="location">
                            </div>
                            <div class="col-12">
                                <label class="form-label">Notes</label>
                                <textarea class="form-control" name="notes" rows="3"></textarea>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" id="saveApplication">Save Application</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Billing History Modal -->
    <div class="modal fade" id="billingHistoryModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Billing History</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="table-responsive">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>Date</th>
                                    <th>Description</th>
                                    <th>Amount</th>
                                    <th>Status</th>
                                    <th>Invoice</th>
                                </tr>
                            </thead>
                            <tbody id="billingHistoryTable">
                                <!-- Billing history will be populated here -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Add active class to current nav item
        document.querySelectorAll('.nav-link').forEach(link => {
            link.addEventListener('click', function() {
                document.querySelector('.nav-link.active').classList.remove('active');
                this.classList.add('active');
            });
        });

        // Toggle automation
        document.getElementById('automationToggle').addEventListener('change', async function() {
            try {
                const response = await fetch('/api/automation/toggle', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        enabled: this.checked
                    })
                });
                
                if (!response.ok) {
                    throw new Error('Failed to update automation status');
                }
            } catch (error) {
                console.error('Error:', error);
                this.checked = !this.checked; // Revert the toggle if there's an error
            }
        });

        // Add this to your existing script section
        document.addEventListener('DOMContentLoaded', function() {
            // Section Navigation
            const sections = ['overview', 'applications', 'preferences', 'resume', 'automation', 'subscription', 'profile', 'settings'];
            document.querySelectorAll('.nav-link').forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const targetId = this.getAttribute('href').substring(1);
                    sections.forEach(section => {
                        const element = document.getElementById(section);
                        if (element) {
                            if (section === targetId) {
                                element.classList.remove('d-none');
                            } else {
                                element.classList.add('d-none');
                            }
                        }
                    });
                });
            });

            // Add Experience Button
            document.getElementById('addExperience')?.addEventListener('click', function() {
                const container = document.getElementById('experienceContainer');
                const experienceCard = container.children[0].cloneNode(true);
                // Clear input values
                experienceCard.querySelectorAll('input, textarea').forEach(input => input.value = '');
                container.appendChild(experienceCard);
            });

            // Add Education Button
            document.getElementById('addEducation')?.addEventListener('click', function() {
                const container = document.getElementById('educationContainer');
                const educationCard = container.children[0].cloneNode(true);
                // Clear input values
                educationCard.querySelectorAll('input').forEach(input => input.value = '');
                container.appendChild(educationCard);
            });

            // Save Preferences
            document.getElementById('savePreferences')?.addEventListener('click', async function() {
                try {
                    // Collect form data and send to server
                    const formData = new FormData(document.getElementById('preferencesForm'));
                    const response = await fetch('/api/preferences/save', {
                        method: 'POST',
                        body: formData
                    });
                    if (response.ok) {
                        // Show success message
                        alert('Preferences saved successfully!');
                    }
                } catch (error) {
                    console.error('Error saving preferences:', error);
                    alert('Failed to save preferences. Please try again.');
                }
            });

            // Save Resume
            document.getElementById('saveResume')?.addEventListener('click', async function() {
                try {
                    // Collect form data and send to server
                    const formData = new FormData(document.getElementById('resumeForm'));
                    const response = await fetch('/api/resume/save', {
                        method: 'POST',
                        body: formData
                    });
                    if (response.ok) {
                        // Show success message
                        alert('Resume saved successfully!');
                    }
                } catch (error) {
                    console.error('Error saving resume:', error);
                    alert('Failed to save resume. Please try again.');
                }
            });

            // Logout Button Handler
            document.getElementById('logoutBtn')?.addEventListener('click', async function() {
                if (confirm('Are you sure you want to logout?')) {
                    try {
                        const response = await fetch('/auth/logout', {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json'
                            }
                        });

                        if (response.ok) {
                            // Redirect to login page after successful logout
                            window.location.href = '/login';
                        } else {
                            throw new Error('Logout failed');
                        }
                    } catch (error) {
                        console.error('Error during logout:', error);
                        alert('Failed to logout. Please try again.');
                    }
                }
            });
        });
    </script>
</body>
</html> 